(this["webpackJsonpreact_movies-list-fetch-movies"]=this["webpackJsonpreact_movies-list-fetch-movies"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c,i=n(8),s=n.n(i),a=(n(18),n(12)),r=n(9),l=n(10),o=n(13),d=n(11),u=n(1),j=(n(19),n(20),n(21),n(0)),b=function(e){var t=e.movie;return Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-image",children:Object(j.jsx)("figure",{className:"image is-4by3",children:Object(j.jsx)("img",{src:t.Poster,alt:"Film logo"})})}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"media",children:[Object(j.jsx)("div",{className:"media-left",children:Object(j.jsx)("figure",{className:"image is-48x48",children:Object(j.jsx)("img",{src:"images/imdb-logo.jpeg",alt:"imdb"})})}),Object(j.jsx)("div",{className:"media-content",children:Object(j.jsx)("p",{className:"title is-8",children:t.Title})})]}),Object(j.jsxs)("div",{className:"content",children:[t.Plot,Object(j.jsx)("br",{})]})]})]})},m=function(e){var t=e.movies;return Object(j.jsx)("div",{className:"movies",children:t.map((function(e){return Object(j.jsx)(b,{movie:e},e.imdbID)}))})},v=n(2),h=n.n(v),O=n(5),f=n(6);!function(e){e.NOT_FOUND="Can't find a movie with such a title",e.ALREADY_EXISTS="This movie already has been added",e.EMPTY=""}(c||(c={}));var x=function(e){return{Poster:e.Poster,Title:e.Title,Plot:e.Plot,imdbID:e.imdbID}},p=function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.omdbapi.com/?apikey=b8686686&t="+t).then((function(e){return e.json()}));case 2:if("True"!==(n=e.sent).Response){e.next=5;break}return e.abrupt("return",x(n));case 5:throw new Error(c.NOT_FOUND);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=(n(24),function(e){var t=e.addMovie,n=Object(u.useRef)(null),i=Object(u.useState)(""),s=Object(f.a)(i,2),a=s[0],r=s[1],l=Object(u.useState)(c.EMPTY),o=Object(f.a)(l,2),d=o[0],m=o[1],v=Object(u.useState)(null),x=Object(f.a)(v,2),N=x[0],g=x[1],w="is-danger",T=function(){var e,t=null===(e=n.current)||void 0===e?void 0:e.classList;(null===t||void 0===t?void 0:t.contains(w))||null===t||void 0===t||t.add(w)},y=Object(u.useCallback)(function(){var e=Object(O.a)(h.a.mark((function e(t){var n,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a){e.next=4;break}return T(),e.abrupt("return");case 4:return e.prev=4,e.next=7,p(a);case 7:n=e.sent,g(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),d!==c.NOT_FOUND&&(i=e.t0,s=i.message,T(),m(s),g(null));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),[a]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:"find-movie",onSubmit:y,children:[Object(j.jsxs)("div",{className:"field",children:[Object(j.jsx)("label",{className:"label",htmlFor:"movie-title",children:"Movie title"}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("input",{ref:n,type:"text",id:"movie-title",placeholder:"Enter a title to search",className:"input",value:a,onChange:function(e){d&&m(c.EMPTY),function(){var e,t=null===(e=n.current)||void 0===e?void 0:e.classList;(null===t||void 0===t?void 0:t.contains(w))&&(null===t||void 0===t||t.remove(w))}(),r(e.target.value)}})}),Object(j.jsx)("p",{className:"help is-danger",children:d})]}),Object(j.jsxs)("div",{className:"field is-grouped",children:[Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{type:"submit",className:"button is-light",children:"Find a movie"})}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{type:"button",className:"button is-primary",onClick:function(){N&&(t(N)||m(c.ALREADY_EXISTS),g(null),r(c.EMPTY))},children:"Add to the list"})})]})]}),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h2",{className:"title",children:"Preview"}),N&&Object(j.jsx)(b,{movie:N})]})]})}),g=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(r.a)(this,n);for(var c=arguments.length,i=new Array(c),s=0;s<c;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={movies:[]},e.addMovie=function(t){return!(e.state.movies.findIndex((function(e){return e.imdbID===t.imdbID}))>=0)&&(e.setState((function(e){return{movies:[].concat(Object(a.a)(e.movies),[t])}})),!0)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.movies;return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)("div",{className:"page-content",children:Object(j.jsx)(m,{movies:e})}),Object(j.jsx)("div",{className:"sidebar",children:Object(j.jsx)(N,{addMovie:this.addMovie})})]})}}]),n}(u.Component);s.a.render(Object(j.jsx)(g,{}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.41633238.chunk.js.map